{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/multiple_autocomplete.css' %}">
</head>
<body>
    <div style="display:none;">
        {{ form.autocomplete }}
    </div>

    <div>
        <span class="autocomplete-select"></span>
    </div>
    <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'js/bundle.min.js' %}"></script>
    <script>
    {# read data of selectbox and add data to autocomplete element#}
        var values2 = document.querySelectorAll('#id_autocomplete option');
        var values = [];
        for(let i = 0; i<values2.length; i++){
            values.push(
                {
                    label: values2[i].text,
                    value: values2[i].value,
                }
            )
        }

        var autocomplete = new SelectPure(".autocomplete-select", {
            options: values,
            value: [],
            multiple: true,
            autocomplete: true,
            icon: "fa fa-times",
            onChange: value => {
                {# update selectbox whenever autocomplete is changed #}
                console.log(value);
                $('#id_autocomplete').val(value);
            },
            classNames: {
                select: "select-pure__select",
                dropdownShown: "select-pure__select--opened",
                multiselect: "select-pure__select--multiple",
                label: "select-pure__label",
                placeholder: "select-pure__placeholder",
                dropdown: "select-pure__options",
                option: "select-pure__option",
                autocompleteInput: "select-pure__autocomplete",
                selectedLabel: "select-pure__selected-label",
                selectedOption: "select-pure__option--selected",
                placeholderHidden: "select-pure__placeholder--hidden",
                optionHidden: "select-pure__option--hidden",
            }
        });


    </script>
</body>
</html>